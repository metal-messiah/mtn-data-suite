<mds-sub-title-bar subTitle="4. Enter Narrative Text"></mds-sub-title-bar>

<ng-template #loading>
  <div class="content">
    <span style="text-align: center;"><i class="fas fa-spinner fa-pulse fa-2x"></i></span>
  </div>
</ng-template>
<form class="content" id="site-eval-form" *ngIf="siteEvaluationNarrativeForm && siteEvaluationRatingsForm; else loading;">
  <div [formGroup]="siteEvaluationNarrativeForm">
    <mat-form-field>
      <textarea rows="3" matInput placeholder="Executive Summary" formControlName="executiveSummary"></textarea>
    </mat-form-field>
    <mat-form-field>
      <textarea rows="3" matInput placeholder="Scenario" formControlName="scenario"></textarea>
    </mat-form-field>
    <mat-form-field>
      <input type="number" matInput placeholder="Assumed Power" formControlName="assumedPower">
    </mat-form-field>
    <mat-form-field>
      <textarea rows="3" matInput placeholder="Competitive Changes" formControlName="competitiveChanges"></textarea>
    </mat-form-field>
    <mat-form-field>
      <textarea rows="3" matInput placeholder="Street Conditions" formControlName="streetConditions"></textarea>
    </mat-form-field>
    <mat-form-field>
      <textarea rows="3" matInput placeholder="Comments" formControlName="comments"></textarea>
    </mat-form-field>
    <mat-form-field>
      <textarea rows="3" matInput placeholder="Traffic Controls" formControlName="trafficControls"></textarea>
    </mat-form-field>
    <mat-form-field>
      <textarea rows="3" matInput placeholder="Co-Tenants" formControlName="cotenants"></textarea>
    </mat-form-field>
    <mat-form-field>
      <textarea rows="3" matInput placeholder="Affected Sister Stores"
                formControlName="affectedSisterStores"></textarea>
    </mat-form-field>
  </div>
  <div id="ratings" [formGroup]="siteEvaluationRatingsForm">
    <h3 class='select-group-header bold'>Access</h3>
    <div class='select-group'>
      <mat-form-field *ngFor="let direction of directions">
        <mat-select [placeholder]="direction" [formControlName]="'access' + direction">
          <mat-option [value]="option" *ngFor="let option of ratingOptions">{{option}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <h3 class='select-group-header bold'>Ingress/Egress</h3>
    <div class='select-group'>
      <mat-form-field>
        <mat-select placeholder='Ingress/Egress' formControlName="ingressEgress">
          <mat-option [value]="option" *ngFor="let option of ratingOptions">{{option}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <h3 class='select-group-header bold'>Visibility</h3>
    <div class='select-group'>
      <mat-form-field *ngFor="let direction of directions">
        <mat-select [placeholder]="direction" [formControlName]="'visibility' + direction">
          <mat-option [value]="option" *ngFor="let option of ratingOptions">{{option}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <h3 class='select-group-header'>Population Density</h3>
    <div class='select-group' style="margin-bottom: 16px;">
      <mat-form-field *ngFor="let direction of directions">
        <mat-select [placeholder]="direction" [formControlName]="'populationDensity' + direction">
          <mat-option [value]="option" *ngFor="let option of ratingOptions">{{option}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
</form>

<mds-sub-title-bar>
  <span *ngIf="saving" style="margin-right: 8px;">
    <i class="fas fa-spinner fa-pulse"></i>&nbsp;Saving...
  </span>
  <button color="accent" form="site-eval-form" type="button" mat-raised-button [routerLink]="['../table-preview']">
    Next
  </button>
</mds-sub-title-bar>
