<form *ngIf="form" [formGroup]="form" class="wrapper">
  <table>
    <tr>
      <th>Map Key</th>
      <th>Store ID</th>
      <th>Store Name</th>
      <th>Location</th>
      <th>Sales Area</th>
      <th>Total Area</th>
      <th>Total Change</th>
      <th>Total %</th>
      <th>TA Change</th>
      <th>TA %</th>
      <th>Use TA Change</th>
    </tr>
    <tr formArrayName="stores" *ngFor="let store of getStoreControls(); let i = index;">
      <td>{{store.get('mapKey').value}}</td>
      <td>
        <a [href]="origin + '/casing?store-id=' + store.get('uniqueId').value" target="_blank">{{store.get('uniqueId').value}}</a>
      </td>
      <td>{{store.get('storeName').value}}</td>
      <td>{{store.get('location').value}}</td>
      <td class="right-align">{{store.get('salesArea').value}}</td>
      <td [formGroupName]="i" class="right-align">
        <input type="number" formControlName="totalArea" min="0">
      </td>
      <td class="right-align">{{store.get('totalChange').value | thousandsCurrency}}</td>
      <td class="right-align">{{store.get('totalChangePerc').value | percent:'1.0-1'}}</td>
      <td class="right-align">{{store.get('tradeAreaChange').value | thousandsCurrency}}</td>
      <td class="right-align">{{store.get('tradeAreaChangePerc').value | percent:'1.0-1'}}</td>
      <td [formGroupName]="i" style="text-align: center;">
        <input type="checkbox" formControlName="useTradeAreaChange">
      </td>
    </tr>
  </table>
  <div class='submit'>
    <h3 *ngIf="form.invalid" style="color: #ff4c3e;">All Total Areas are Required</h3>
    <button [color]="'primary'" mat-raised-button (click)="_location.back()" style="margin:20px 20px 0 0;">Go Back</button>
    <button [color]="'warn'" mat-raised-button (click)="next()" [disabled]="form.invalid" style="margin-top:20px;" >Next</button>
  </div>
</form>


